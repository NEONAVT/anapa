<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Liquid Glass 2025 — Demo</title>
  <style>
    /* === Base from your snippet === */
    :root{
      --brand:#cc4964; --brand-rgb:204,73,100;
      --bg:#ffffff; --text:#0a0a0a; --muted:#6b7280; --border:#e5e7eb;
      --max:1120px; --radius:16px;

      --glass-blur:20px; --glass-sat:1.2; --bar-alpha:.14;
      --btn-alpha:.30; --btn-alpha-hover:.38; --btn-outer-shadow:.10;
      --stroke-alpha:.35; --shadow-alpha:.16;
      --logo-size:80px; --tg-size:22px;
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}
    html,body{overflow-x:hidden}

    .topbar{position:sticky;top:0;z-index:1000;
      background:linear-gradient(180deg, rgba(var(--brand-rgb), .08), rgba(255,255,255,.04)), rgba(255,255,255,var(--bar-alpha));
      -webkit-backdrop-filter:saturate(var(--glass-sat)) blur(var(--glass-blur));
      backdrop-filter:saturate(var(--glass-sat)) blur(var(--glass-blur));
      box-shadow:inset 0 1px 0 rgba(255,255,255,.50), 0 8px 24px rgba(0,0,0,var(--shadow-alpha));
      border-bottom:1px solid rgba(255,255,255,var(--stroke-alpha));
      overflow:visible;
    }
    .topbar__inner{max-width:var(--max);margin:0 auto;padding:10px 16px;
      display:grid;grid-template-columns:1fr auto 1fr;grid-template-areas:"left center right";
      align-items:center;gap:12px;}
    .topbar__left{grid-area:left;display:flex;align-items:center;gap:10px;justify-content:flex-start}
    .topbar__center{grid-area:center;display:flex;justify-content:center}
    .topbar__right{grid-area:right;display:flex;justify-content:flex-end;gap:10px;flex-wrap:wrap}

    @media (max-width:768px){
      :root{ --logo-size:40px; --tg-size:16px; }
      .topbar{ position: sticky; top: 0; border-bottom:0; }
      .topbar__inner{
        grid-template-columns:auto auto;
        grid-template-areas:
          "center left"
          "right  right";
        row-gap:6px;
        padding:4px 8px 6px;
        align-items:center;
      }
      .topbar__center{ justify-content:flex-end; }
      .topbar__left{ justify-content:flex-start; }
      .topbar__right{
        justify-content:center; flex-wrap:nowrap; gap:10px;
        padding:4px 8px !important; overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none;
      }
      .topbar__right::-webkit-scrollbar{display:none}
      .glass-btn{padding:4px 8px;font-size:13px;line-height:1.1}
    }

    .glass-btn{
      position:relative;display:inline-flex;align-items:center;gap:8px;
      padding:9px 12px;border-radius:999px;font-weight:600;color:#0b0b0b;
      background:rgba(255,255,255,var(--btn-alpha));
      border:1px solid transparent;
      -webkit-backdrop-filter:saturate(1.1) blur(calc(var(--glass-blur)*.6));
      backdrop-filter:saturate(1.1) blur(calc(var(--glass-blur)*.6));
      box-shadow:0 6px 16px rgba(0,0,0,var(--btn-outer-shadow));
      transition:background .15s ease, transform .06s ease, box-shadow .15s ease;
      white-space:nowrap; cursor:pointer;
    }
    .glass-btn:hover{background:rgba(255,255,255,var(--btn-alpha-hover));box-shadow:0 8px 20px rgba(0,0,0,.12)}
    .glass-btn:active{transform:translateY(1px)}
    .glass-btn:focus-visible{outline:none;box-shadow:0 0 0 2px rgba(0,0,0,.06), 0 8px 20px rgba(0,0,0,.12)}

    /* === Page layout === */
    .wrap{max-width:var(--max);margin:32px auto;padding:0 16px}
    .hero{display:grid;gap:16px;align-items:start;grid-template-columns:1.2fr .8fr}
    .card{
      padding:18px;border-radius:var(--radius);
      background:rgba(255,255,255,.6);
      -webkit-backdrop-filter:saturate(1.05) blur(calc(var(--glass-blur)*.4));
      backdrop-filter:saturate(1.05) blur(calc(var(--glass-blur)*.4));
      border:1px solid rgba(255,255,255,var(--stroke-alpha));
      box-shadow:0 10px 30px rgba(0,0,0,var(--shadow-alpha));
    }
    .muted{color:var(--muted);font-size:14px}
    @media (max-width:900px){ .hero{grid-template-columns:1fr} }

    /* === Liquid Glass 2025 Modal === */
    .lg-modal{position:fixed;inset:0;z-index:2000;display:none}
    .lg-modal[aria-hidden="false"]{display:block}

    .lg-modal__backdrop{
      position:absolute;inset:0;
      background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.40));
      -webkit-backdrop-filter:saturate(1.1) blur(calc(var(--glass-blur)*.7));
      backdrop-filter:saturate(1.1) blur(calc(var(--glass-blur)*.7));
      opacity:0;transition:opacity .18s ease-out;
    }

    .lg-modal__dialog{
      position:absolute;inset:auto;left:50%;top:50%;
      transform:translate(-50%,-44%) scale(.98);
      width:min(640px, calc(100vw - 24px));
      max-height:calc(100dvh - 24px);
      overflow:auto;border-radius:calc(var(--radius) * 1.1);
      padding:18px;border:1px solid rgba(255,255,255,var(--stroke-alpha));
      background:
        radial-gradient(120% 120% at 0% 0%, rgba(255,255,255,.55), rgba(255,255,255,.28) 60%, rgba(255,255,255,.22)),
        linear-gradient(180deg, rgba(255,255,255,.35), rgba(255,255,255,.20));
      -webkit-backdrop-filter:saturate(var(--glass-sat)) blur(var(--glass-blur));
      backdrop-filter:saturate(var(--glass-sat)) blur(var(--glass-blur));
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.55),
        0 10px 30px rgba(0,0,0,var(--shadow-alpha)),
        0 80px 120px -40px rgba(0,0,0,.35);
      opacity:0;transition:transform .22s cubic-bezier(.2,.8,.2,1), opacity .18s ease-out;
    }

    .lg-modal__dialog::before{
      content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;
      background:
        conic-gradient(from 180deg, rgba(var(--brand-rgb),.28), rgba(255,255,255,.0) 25%, rgba(64,156,255,.25) 50%, rgba(255,255,255,.0) 75%, rgba(var(--brand-rgb),.28));
      filter:blur(18px) saturate(1.2);
      mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite:xor; mask-composite:exclude;
      padding:1px;opacity:.6;
    }

    .lg-modal__dialog::after{
      content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;opacity:.10;
      background-image:url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'>\
      <filter id='f'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/><feComponentTransfer><feFuncA type='table' tableValues='0 0.4'/></feComponentTransfer></filter>\
      <rect width='100%' height='100%' filter='url(%23f)'/></svg>");
      background-size:120px 120px;
    }

    .lg-modal[aria-hidden="false"] .lg-modal__backdrop{opacity:1}
    .lg-modal[aria-hidden="false"] .lg-modal__dialog{
      opacity:1;transform:translate(-50%,-50%) scale(1);
    }

    .lg-modal__header{display:flex;align-items:center;gap:10px;margin:6px 6px 12px}
    .lg-modal__header h2{margin:0;font-size:20px;letter-spacing:.2px}
    .lg-modal__dot{
      width:10px;height:10px;border-radius:999px;flex:0 0 10px;
      background:radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,.2) 40%, rgba(var(--brand-rgb),.9));
      box-shadow:0 0 0 2px rgba(255,255,255,.4), 0 6px 14px rgba(var(--brand-rgb),.35);
    }

    .lg-modal__content{padding:6px 6px 4px;color:var(--text)}
    .lg-form{display:grid;gap:12px}
    .lg-field{display:grid;gap:6px}
    .lg-field input{
      width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.65);
      -webkit-backdrop-filter:saturate(1.05) blur(calc(var(--glass-blur)*.4));
      backdrop-filter:saturate(1.05) blur(calc(var(--glass-blur)*.4));
      outline:none;transition:border-color .15s ease, box-shadow .15s ease;
    }
    .lg-field input:focus{
      border-color:rgba(var(--brand-rgb),.45);
      box-shadow:0 0 0 3px rgba(var(--brand-rgb),.18);
    }
    .lg-actions{display:flex;gap:10px;justify-content:flex-end}
    .lg-btn-ghost{background:rgba(255,255,255,.18);box-shadow:none;border:1px solid rgba(0,0,0,.06)}

    .lg-modal__close{
      position:sticky;top:6px;left:calc(100% - 34px);margin-left:auto;
      display:inline-grid;place-items:center;
      width:32px;height:32px;border-radius:999px;border:1px solid rgba(255,255,255,.55);
      background:rgba(255,255,255,.45);
      -webkit-backdrop-filter:saturate(1.1) blur(calc(var(--glass-blur)*.5));
      backdrop-filter:saturate(1.1) blur(calc(var(--glass-blur)*.5));
      color:#111;cursor:pointer;z-index:1;
      box-shadow:inset 0 1px 0 rgba(255,255,255,.6), 0 8px 20px rgba(0,0,0,.12);
      transition:transform .06s ease, background .15s ease;
    }
    .lg-modal__close:hover{background:rgba(255,255,255,.6)}
    .lg-modal__close:active{transform:translateY(1px)}

    @media (max-width:768px){
      .lg-modal__dialog{width:calc(100vw - 16px);padding:14px;border-radius:14px}
      .lg-modal__header h2{font-size:18px}
    }
  </style>
</head>
<body>
  <!-- Top bar -->
  <div class="topbar">
    <div class="topbar__inner">
      <div class="topbar__left">
        <strong>Demo</strong>
      </div>
      <div class="topbar__center">
        <button class="glass-btn" id="open-btn" data-modal-open="demo-modal">Открыть поп-ап</button>
      </div>
      <div class="topbar__right">
        <span class="muted">Liquid Glass 2025</span>
      </div>
    </div>
  </div>

  <!-- Content -->
  <main class="wrap">
    <section class="hero">
      <div class="card">
        <h1 style="margin:0 0 6px">Страница-демо</h1>
        <p class="muted">Прокрутка и контент для проверки блокировки скролла и фокуса. Кнопка в топбаре открывает модалку. Дополнительно — кнопка ниже.</p>
        <p><button class="glass-btn" data-modal-open="demo-modal">Открыть здесь</button></p>
        <p class="muted">Добавь больше текста, чтобы проверить поведение на маленьких экранах. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolorum, suscipit. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quas, ratione.</p>
      </div>
      <div class="card">
        <h2 style="margin:0 0 6px">Второй блок</h2>
        <p class="muted">Имитация реального контента.</p>
        <ul>
          <li>Проверка backdrop</li>
          <li>Проверка анимаций</li>
          <li>Проверка фокус-трапа</li>
        </ul>
      </div>
    </section>

    <section class="card" style="margin-top:16px">
      <p class="muted">Ниже просто длинный контент для скролла.</p>
      <div style="height:1400px;background:linear-gradient(180deg, rgba(0,0,0,.02), transparent)"></div>
    </section>
  </main>

  <!-- Modal -->
  <div class="lg-modal" id="demo-modal" aria-hidden="true">
    <div class="lg-modal__backdrop" data-modal-close></div>

    <div class="lg-modal__dialog"
         role="dialog"
         aria-modal="true"
         aria-labelledby="demo-title"
         aria-describedby="demo-desc"
         tabindex="-1">

      <button class="lg-modal__close" type="button" aria-label="Закрыть" data-modal-close>
        <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 6l12 12M18 6L6 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>

      <header class="lg-modal__header">
        <div class="lg-modal__dot"></div>
        <h2 id="demo-title">Liquid Glass Pop-up</h2>
      </header>

      <div id="demo-desc" class="lg-modal__content">
        <p>Контент поп-апа. Здесь любой HTML: формы, текст, кнопки.</p>
        <form id="demo-form" class="lg-form">
          <label class="lg-field">
            <span>Ваш e-mail</span>
            <input id="email" type="email" placeholder="you@example.com" required>
          </label>
          <div class="lg-actions">
            <button class="glass-btn" type="submit">Отправить</button>
            <button class="glass-btn lg-btn-ghost" type="button" data-modal-close>Отмена</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // --- Modal core (vanilla) ---
    (() => {
      const scrollLock = {
        _locked: false,
        lock(){
          if(this._locked) return;
          const html = document.documentElement;
          this._prevOverflow = html.style.overflow;
          html.style.overflow='hidden';
          this._locked=true;
        },
        unlock(){
          if(!this._locked) return;
          document.documentElement.style.overflow=this._prevOverflow || '';
          this._locked=false;
        }
      };

      const getFocusable = (root) =>
        [...root.querySelectorAll('a[href], button, input, select, textarea, [tabindex]:not([tabindex="-1"])')]
          .filter(el => !el.hasAttribute('disabled') && !el.getAttribute('aria-hidden'));

      function openModal(id){
        const modal = document.getElementById(id);
        if(!modal) return;
        const dialog = modal.querySelector('.lg-modal__dialog');
        modal.setAttribute('aria-hidden','false');
        scrollLock.lock();

        // store and move focus
        const prevActive = document.activeElement;
        dialog.dataset.prevFocusId = prevActive && prevActive.id ? prevActive.id : '';
        const first = getFocusable(dialog)[0] || dialog;
        first.focus({preventScroll:true});

        const onKey = (e) => {
          if(e.key === 'Escape'){ closeModal(modal); }
          if(e.key === 'Tab'){
            const items = getFocusable(dialog);
            if(items.length === 0){ e.preventDefault(); return; }
            const idx = items.indexOf(document.activeElement);
            if(e.shiftKey && (idx <= 0)){ items[items.length-1].focus(); e.preventDefault(); }
            else if(!e.shiftKey && (idx === items.length-1)){ items[0].focus(); e.preventDefault(); }
          }
        };
        modal._onKey = onKey;
        document.addEventListener('keydown', onKey);
      }

      function closeModal(modal){
        if(typeof modal === 'string') modal = document.getElementById(modal);
        if(!modal) return;
        modal.setAttribute('aria-hidden','true');
        document.removeEventListener('keydown', modal._onKey || (()=>{}));
        scrollLock.unlock();

        // restore focus
        const dialog = modal.querySelector('.lg-modal__dialog');
        const prevId = dialog?.dataset?.prevFocusId;
        if(prevId){
          const prev = document.getElementById(prevId);
          if(prev) prev.focus({preventScroll:true});
        }
      }

      // delegates
      document.addEventListener('click', (e) => {
        const openBtn = e.target.closest('[data-modal-open]');
        const closeBtn = e.target.closest('[data-modal-close]');
        if(openBtn){ e.preventDefault(); openModal(openBtn.getAttribute('data-modal-open')); }
        if(closeBtn){ e.preventDefault(); const m = closeBtn.closest('.lg-modal'); if(m) closeModal(m); }
      });

      // demo submit
      const form = document.getElementById('demo-form');
      if(form){
        form.addEventListener('submit', (e) => {
          e.preventDefault();
          const btn = form.querySelector('button[type="submit"]');
          const prev = btn.textContent;
          btn.textContent = 'Отправка…'; btn.disabled = true;
          setTimeout(() => {
            btn.textContent = prev; btn.disabled = false;
            closeModal('demo-modal');
          }, 800);
        });
      }
    })();
  </script>
</body>
</html>
